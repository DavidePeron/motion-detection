\documentclass{standalone}

\usepackage[latin1]{inputenc}
\usepackage{tikz}
\usetikzlibrary{arrows,calc,positioning,shadows,shapes}
\begin{document}
\pagestyle{empty}

\tikzstyle{block} = [draw, fill=white, rectangle,
    minimum height=3em, minimum width=6em]
\tikzstyle{sum} = [draw, fill=white, circle, node distance=1cm]
\tikzstyle{input} = [coordinate]
\tikzstyle{output} = [coordinate]
\tikzstyle{pinstyle} = [pin edge={to-,thin,black}]

\begin{tikzpicture}[auto, node distance=2cm,>=latex']

    \node [input, name=input] {};
    \node [block, right of=input] (preprocessing) {Preprocessing};
    \node [block, right of=preprocessing, node distance = 3cm] (training) {Training};
    \node [block, right of=training, node distance=3cm] (testing) {Testing};
    \node [block, right of=testing, node distance=3cm, align=center] (prediction) {Real-time \\ prediction};

    \draw [->] (training) -- node[name=u] {} (testing);
    \node [output, below of=prediction] (output) {};

    \draw [draw,->] (input) -- node {$r$} (preprocessing);
    \draw [->] (preprocessing) -- node {} (training);
    \draw [->] (testing) -- node [name=a] {}(prediction);
    \draw [->] (a) -- ++ (0,-2) -| node [pos=0.99] {} (preprocessing);
    \draw [->] (prediction) -- node [name=y] {$y$}(output);
\end{tikzpicture}

\end{document}